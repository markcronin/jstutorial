const planeSmall = [
  {seatNumber: 1, seatClass: "first"},
  {seatNumber: 2, seatClass: "first"},
  {seatNumber: 3, seatClass: "first"},
  {seatNumber: 4, seatClass: "first"},
  {seatNumber: 5, seatClass: "business"},
  {seatNumber: 6, seatClass: "business"},
  {seatNumber: 7, seatClass: "business"},
  {seatNumber: 8, seatClass: "business"},
  {seatNumber: 9, seatClass: "business"},
  {seatNumber: 10, seatClass: "business"},
  {seatNumber: 11, seatClass: "business"},
  {seatNumber: 12, seatClass: "business"},
  {seatNumber: 13, seatClass: "economy"},
  {seatNumber: 14, seatClass: "economy"},
  {seatNumber: 15, seatClass: "economy"},
  {seatNumber: 16, seatClass: "economy"},
  {seatNumber: 17, seatClass: "economy"},
  {seatNumber: 18, seatClass: "economy"},
  {seatNumber: 19, seatClass: "economy"},
  {seatNumber: 20, seatClass: "economy"},
  {seatNumber: 21, seatClass: "economy"},
  {seatNumber: 22, seatClass: "economy"},
  {seatNumber: 23, seatClass: "economy"},
  {seatNumber: 24, seatClass: "economy"},
  {seatNumber: 25, seatClass: "economy"},
  {seatNumber: 26, seatClass: "economy"},
  {seatNumber: 27, seatClass: "economy"},
  {seatNumber: 28, seatClass: "economy"},
  {seatNumber: 29, seatClass: "economy"},
  {seatNumber: 30, seatClass: "economy"},
  {seatNumber: 31, seatClass: "economy"},
  {seatNumber: 32, seatClass: "economy"},
]

const planeMedium = [
  {seatNumber: 1, seatClass: "first"},
  {seatNumber: 2, seatClass: "first"},
  {seatNumber: 3, seatClass: "first"},
  {seatNumber: 4, seatClass: "first"},
  {seatNumber: 5, seatClass: "first"},
  {seatNumber: 6, seatClass: "first"},
  {seatNumber: 7, seatClass: "business"},
  {seatNumber: 8, seatClass: "business"},
  {seatNumber: 9, seatClass: "business"},
  {seatNumber: 10, seatClass: "business"},
  {seatNumber: 11, seatClass: "business"},
  {seatNumber: 12, seatClass: "business"},
  {seatNumber: 13, seatClass: "business"},
  {seatNumber: 14, seatClass: "business"},
  {seatNumber: 15, seatClass: "business"},
  {seatNumber: 16, seatClass: "business"},
  {seatNumber: 17, seatClass: "economy"},
  {seatNumber: 18, seatClass: "economy"},
  {seatNumber: 19, seatClass: "economy"},
  {seatNumber: 20, seatClass: "economy"},
  {seatNumber: 21, seatClass: "economy"},
  {seatNumber: 22, seatClass: "economy"},
  {seatNumber: 23, seatClass: "economy"},
  {seatNumber: 24, seatClass: "economy"},
  {seatNumber: 25, seatClass: "economy"},
  {seatNumber: 26, seatClass: "economy"},
  {seatNumber: 27, seatClass: "economy"},
  {seatNumber: 28, seatClass: "economy"},
  {seatNumber: 29, seatClass: "economy"},
  {seatNumber: 30, seatClass: "economy"},
  {seatNumber: 31, seatClass: "economy"},
  {seatNumber: 32, seatClass: "economy"},
  {seatNumber: 33, seatClass: "economy"},
  {seatNumber: 34, seatClass: "economy"},
  {seatNumber: 35, seatClass: "economy"},
  {seatNumber: 36, seatClass: "economy"},
]

const planeLarge = [
  {seatNumber: 1, seatClass: "first"},
  {seatNumber: 2, seatClass: "first"},
  {seatNumber: 3, seatClass: "first"},
  {seatNumber: 4, seatClass: "first"},
  {seatNumber: 5, seatClass: "first"},
  {seatNumber: 6, seatClass: "first"},
  {seatNumber: 7, seatClass: "first"},
  {seatNumber: 8, seatClass: "first"},
  {seatNumber: 9, seatClass: "business"},
  {seatNumber: 10, seatClass: "business"},
  {seatNumber: 11, seatClass: "business"},
  {seatNumber: 12, seatClass: "business"},
  {seatNumber: 13, seatClass: "business"},
  {seatNumber: 14, seatClass: "business"},
  {seatNumber: 15, seatClass: "business"},
  {seatNumber: 16, seatClass: "business"},
  {seatNumber: 17, seatClass: "business"},
  {seatNumber: 18, seatClass: "business"},
  {seatNumber: 19, seatClass: "business"},
  {seatNumber: 20, seatClass: "business"},
  {seatNumber: 21, seatClass: "economy"},
  {seatNumber: 22, seatClass: "economy"},
  {seatNumber: 23, seatClass: "economy"},
  {seatNumber: 24, seatClass: "economy"},
  {seatNumber: 25, seatClass: "economy"},
  {seatNumber: 26, seatClass: "economy"},
  {seatNumber: 27, seatClass: "economy"},
  {seatNumber: 28, seatClass: "economy"},
  {seatNumber: 29, seatClass: "economy"},
  {seatNumber: 30, seatClass: "economy"},
  {seatNumber: 31, seatClass: "economy"},
  {seatNumber: 32, seatClass: "economy"},
  {seatNumber: 33, seatClass: "economy"},
  {seatNumber: 34, seatClass: "economy"},
  {seatNumber: 35, seatClass: "economy"},
  {seatNumber: 36, seatClass: "economy"},
  {seatNumber: 37, seatClass: "economy"},
  {seatNumber: 38, seatClass: "economy"},
  {seatNumber: 39, seatClass: "economy"},
  {seatNumber: 40, seatClass: "economy"},
]

//seating arrangement for planeMedium
const oldSeatAssignment = [
  {passengerName: "Ann",        seatNumber: 1 },
  {passengerName: "Linda",      seatNumber: 2 },
  {passengerName: "Deborah",    seatNumber: 3 },
  {passengerName: "Laura",      seatNumber: 4 },
  {passengerName: "Larry",      seatNumber: 6 },
  {passengerName: "Justin",     seatNumber: 9 },
  {passengerName: "Jane",       seatNumber: 10 },
  {passengerName: "Bruce",      seatNumber: 11 },
  {passengerName: "Jason",      seatNumber: 12 },
  {passengerName: "Edward",     seatNumber: 15 },
  {passengerName: "Paul",       seatNumber: 16 },
  {passengerName: "Evelyn",     seatNumber: 17 },
  {passengerName: "Christina",  seatNumber: 18 },
  {passengerName: "Randy",      seatNumber: 21 },
  {passengerName: "Michelle",   seatNumber: 22 },
  {passengerName: "Kimberly",   seatNumber: 23 },
  {passengerName: "Tina",       seatNumber: 24 },
  {passengerName: "Irene",      seatNumber: 27 },
  {passengerName: "Jonathan",   seatNumber: 28 },
  {passengerName: "Harry",      seatNumber: 33 },
  {passengerName: "Matthew",    seatNumber: 36 },
]


//counts and returns the number of first class, business, and economy seats
//input can be a plane, or a passenger list after seatClass has been added
function countSeatClasses(plane){
  let first = 0;
  let business = 0;
  let economy = 0;
  plane.forEach(function(blank,index){
    if (plane[index].seatClass === "first"){
      first += 1;
    } else if (plane[index].seatClass === "business"){
      business += 1;
    } else if (plane[index].seatClass === "economy"){
      economy += 1;
    } else {
      console.log ("error in countSeatClasses function");
    }
  })
  let seatCount = {first: first, business: business, economy: economy};
  return seatCount;
}

//creates a copy of a specified plane
//adds the value 'available' to each seat and sets it to 'true'
function UnassignAllSeats(plane){
  let emptyPlane = plane.map(function(seat){
    seat.available = true;
    return seat;
  })
  return emptyPlane;
}

//adds the value 'seatClass' to each passenger object
//finds the corresponding seatClass from the current plane
function getPassClass(currentSeat,currentPlane){
  currentSeat.forEach (function(seat,x){
    currentPlane.forEach(function(newSeat,y){
      if (seat.seatNumber === newSeat.seatNumber){
        seat.seatClass = newSeat.seatClass;
      }
    })
  })
  return currentSeat;
}

//checks to see whether the new plane is large enough to fit all passengers in their current class
function checkIfPossible(currentSeat,oldPlane,newPlane){
  let planeClass = countSeatClasses(newPlane);
  let passClass = countSeatClasses(getPassClass(currentSeat,oldPlane))
  if (passClass.first > planeClass.first){
    return false;
  } else if (passClass.business > planeClass.business){
    return false;
  } else if (passClass.economy > planeClass.economy){
    return false;
  } else {
    return true;
  }
}

function reassignSeats(currentSeat,oldPlane,newPlane){
  let possible = checkIfPossible(currentSeat,oldPlane,newPlane)
  if (possible === true){
    var output = [];
    var passengerClass = getPassClass(currentSeat,oldPlane)
    var emptyNewPlane = UnassignAllSeats(newPlane)
    for (x = 0; x < passengerClass.length; x++){
      for (y = 0; y < emptyNewPlane.length; y++){
        if ((passengerClass[x].seatClass === emptyNewPlane[y].seatClass)
        && (emptyNewPlane[y].available === true)){
          output.push({passengerName: passengerClass[x].passengerName, seatNumber: emptyNewPlane[y].seatNumber});
          emptyNewPlane[y].available = false;
          break;
        }
      }
    }
  } else {
    console.log ("New plane does not meet requirements");
    return false;
  }
  return output;
}

let test = reassignSeats(oldSeatAssignment,planeMedium,planeLarge);
console.log (test);
